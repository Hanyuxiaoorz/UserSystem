package com.mis.user.personalmess.controller;import com.mis.user.commom.canstants.Canstants;import com.mis.user.personalmess.service.UserPersonalMessService;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RestController;import javax.servlet.http.HttpSession;import java.util.HashMap;import java.util.Map;import static org.springframework.web.bind.annotation.RequestMethod.POST;/** * @author dengsiyuan * @Date 2018.09.10 * */@RestControllerpublic class UserEmailUpdate {    @Autowired    UserPersonalMessService userPersonalMessService;    Map map = new HashMap<String,String>();    @RequestMapping(value = "/userEmailUpdate",method = POST)    public Object userEmailUpdate(String mailVCode, String mail, HttpSession session){        try {            //用户已登录            if(session.getAttribute("user") != null){                if(userPersonalMessService.updateUserEmail(mailVCode,mail)){                    map.clear();                    //1,更改绑定成功                    map.put("userEmailUpdate",Canstants.SUCCESS);                }                else{                    map.clear();                    //2,更改绑定失败                    map.put("userEmailUpdate",Canstants.INFO_NULL);                }            }            else {                map.clear();                //3,未登录,无权更改                map.put("userEmailUpdate", Canstants.LOGIN_PERMISSION_FAIL);            }        }catch (Exception e){            map.clear();            //0,存在Bug            map.put("userEmailUpdate",Canstants.FAIL);        }        return map;    }}